# Подводные камни при проведении A/B-теста

## Ошибка подглядывания
**Пример:**  
Останавливаем A/B-тест сразу же, как только видим прокрас.  
Вероятность получить ошибку I рода после *n* дней < вероятность получить ошибку I рода хотя бы один раз за *n* дней.

---

## Ошибка выжившего
**Пример:**  
В A/B-тесте прокрасилась метрика, на которую изначально не рассчитывали – такое происходит по теории вероятностей.  
Если мы выбираем 100 метрик в A/B-тесте, то в среднем 5 должны случайно прокраситься (при alpha = 0.05).

---

## Парадокс Симпсона
**Пример:**  
Раньше CTR в 2х каналах был 10% и 90%, а доля трафика с этих каналов была 50:50.  

**Общий CTR:**  
0.1 * 0.5 + 0.9 * 0.5 = **0.5 (50%)**

Теперь CTR стал 11% и 91%, а доля трафика с каналов — 90:10.  

**Общий CTR:**  
0.11 * 0.9 + 0.91 * 0.1 = **0.19 (19%)**

**Итог:** CTR по сегментам вырос, но в тотале упал.

---

## Пересечение экспериментов
**Пример:**  
Запускаем одновременно несколько экспериментов на одних и тех же группах.  
Из-за этого в ходе анализа не можем быть уверены, что именно наша фича повлияла на пользователей.

---

## 1 + 1 != 2
**Пример:**  
1. Запускаем одновременно два новых алгоритма ранжирования поиска;  
2. Они дают положительный uplift по отдельности;  
3. При объединении итоговый uplift может не равняться сумме двух uplift по отдельности.  
